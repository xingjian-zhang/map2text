# LLM4Explore V2

## Installation

```bash
git clone git@github.com:xingjian-zhang/llm4exploreV2.git --recursive
```

```bash
pip install -e .
```

(Optional) If you want to use LargeVis, please install the following
dependencies. See [LargeVis](llm4explore/external/largevis/README.md) for more
details if you want to use it in OSX.

```bash
make llm4explore/external/largevis/Linux/LargeVis
```

## Data

Please download the following folder and put them in the `data` directory:
[Dropbox
Link](https://www.dropbox.com/scl/fo/79c7obtbw9b6venmzq26b/AAaCZEdteHYiC4aJBwzbpwA?rlkey=68vtihs33b2qi0as041vwaxkx&st=5jh50ebp&dl=0).
This folder contains:

- `massw.tsv`: The MASSW dataset [text & split]
  - `key_ideas.npz`: The key ideas corresponding to `massw.tsv` [high-dim &
    low-dim embeddings] (generated by OpenAI ada-002 and LargeVis)
  - `context.npz`: The context corresponding to `massw.tsv` [high-dim &
    low-dim embeddings] (generated by OpenAI ada-002 and LargeVis)
- `persona.tsv`: The FinePersonas dataset [text & split]
  - `persona.npz`: The personas corresponding to `persona.tsv` [high-dim &
    low-dim embeddings] (generated by Alibaba-NLP/gte-large-en-v1.5 and UMAP)
- [WIP] `prompt_log.tsv`: The prompt log dataset [text & split]
  - `prompt_log.npz`: The prompts corresponding to `prompt_log.tsv` [high-dim &
    low-dim embeddings] (generated by OpenAI ada-002 and UMAP)

## Usage

### Create high-dim and low-dim embeddings (mapping subtask)

```bash
python llm4explore/quick_start.py llm4explore/configs/<method_name>_map.yaml
```

Note: This step is time-consuming. Feel free to skip it and use the provided embeddings.

### Generate new ideas (generation subtask)

```bash
python llm4explore/quick_start.py llm4explore/configs/<method_name>_gen.yaml
```

### Evaluate generation results

```bash
python llm4explore/quick_eval.py out/gpt35_200.json \
    --output_file out/gpt35_200_evaluation.yaml \
    --metrics bleu,rouge \  # See available metrics in llm4explore/utils/evaluate.py
    --process_json  # Whether the experiment output is in the JSON format, instructed by prompt.
```

## Style check

```bash
ruff check
```
