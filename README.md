# LLM4Explore V2

## Installation

```bash
git clone git@github.com:xingjian-zhang/llm4exploreV2.git --recursive
```

```bash
pip install -e .
```

(Optional) If you want to use LargeVis, please install the following
dependencies. See [LargeVis](llm4explore/external/largevis/README.md) for more
details if you want to use it in OSX.

```bash
make llm4explore/external/largevis/Linux/LargeVis
```

## Data

Please download the following files and put them in the `data` directory.

- [`data/massw_llm4explore.tsv`](https://www.dropbox.com/scl/fi/zfoai05vh2gkr1c7z5rgc/massw_llm4explore.tsv?rlkey=71rx6gz4juhayaawbgi3stqti&dl=0):
  The dataset (preprocessed by merging metadata).
- [`data/ada2_key_ideas.npz`](https://www.dropbox.com/scl/fi/hznm32blw11xzl3cpx6pb/ada2_key_ideas.npz?rlkey=3h3vne1p3a6qfpwaznprihsyh&dl=0):
  The high-dim and low-dim embeddings of the dataset, generated by cofiguration
  `llm4explore/configs/ada2_pretrain_map.yaml`.

## Usage

### Create high-dim and low-dim embeddings (mapping subtask)

```bash
python llm4explore/quick_start.py llm4explore/configs/<method_name>_map.yaml
```

Note: This step is time-consuming. Feel free to skip it and use the provided embeddings.

### Generate new ideas (generation subtask)

```bash
python llm4explore/quick_start.py llm4explore/configs/<method_name>_gen.yaml
```

### Evaluate generation results

```bash
python llm4explore/quick_eval.py out/gpt35_200.json \
    --output_file out/gpt35_200_evaluation.yaml \
    --metrics bleu,rouge \  # See available metrics in llm4explore/utils/evaluate.py
    --process_json  # Whether the experiment output is in the JSON format, instructed by prompt.
```

## Style check

```bash
ruff check
```
